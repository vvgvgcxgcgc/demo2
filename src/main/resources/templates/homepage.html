<!DOCTYPE html>
<html lang="en" xmlns:th = "https://www.thymeleaf.org/">

<head>
    <title>Cơm Anh Bảy</title>
    <div th:replace="~{fragments::head}"></div>
</head>

<body>
<!-- Header section -->
<div th:replace="~{fragments::header}"></div>

<!-- Hero section -->
<div th:replace="~{fragments::hero}"></div>

<!-- Categories Section Begin -->
<section class="categories">
    <div class="container">
        <div class="row">
            <div class="categories__slider owl-carousel">
                <div class="col-lg-3">
                    <div class="categories__item set-bg" data-setbg="/img/categories/cat-1.jpg">
                        <h5><a href="#">Fresh Fruit</a></h5>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="categories__item set-bg" data-setbg="img/categories/cat-2.jpg">
                        <h5><a href="#">Dried Fruit</a></h5>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="categories__item set-bg" data-setbg="img/categories/cat-3.jpg">
                        <h5><a href="#">Vegetables</a></h5>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="categories__item set-bg" data-setbg="img/categories/cat-4.jpg">
                        <h5><a href="#">drink fruits</a></h5>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="categories__item set-bg" data-setbg="img/categories/cat-5.jpg">
                        <h5><a href="#">drink fruits</a></h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Categories Section End -->

<!-- Featured Section Begin -->
<section class="featured spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title">
                    <h2>Today's Menu</h2>

                </div>
            </div>
        </div>

        <!--    Truyen vao day    -->
        <div class="row featured__filter">
<!--            <div class="col-lg-3 col-md-4 col-sm-6" th:each = "product : ${products}" th:if="${product.deleted} == false">-->
<!--                <div id="successMessage" th:if = "${success}" class = "text-center alert alert-success">-->
<!--                    &lt;!&ndash;                                Text báo thêm thành công&ndash;&gt;-->
<!--                    <p th:text = "${success}"></p>-->
<!--                </div>-->
<!--                <div id="errorMessage" th:if = "${error}" class="text-center alert alert-danger">-->
<!--                    &lt;!&ndash;                                Text báo thêm thất bại&ndash;&gt;-->
<!--                    <p th:text = "${error}"></p>-->
<!--                </div>-->

<!--                <script>-->
<!--                    const successMessage = document.getElementById("successMessage");-->
<!--                    const errorMessage = document.getElementById("errorMessage");-->

<!--                    if (successMessage) {-->
<!--                        setTimeout(function () {-->
<!--                            successMessage.classList.add("fade-out");-->
<!--                            setTimeout(function () {-->
<!--                                successMessage.style.display = "none";-->
<!--                            }, 1000); // Thời gian chờ 1 giây để phần tử biến mất sau khi phần tử đã phai mờ-->
<!--                        }, 5000); // Hiển thị trong 5 giây (5000 milliseconds)-->
<!--                    }-->

<!--                    if (errorMessage) {-->
<!--                        setTimeout(function () {-->
<!--                            errorMessage.classList.add("fade-out");-->
<!--                            setTimeout(function () {-->
<!--                                errorMessage.style.display = "none";-->
<!--                            }, 1000); // Thời gian chờ 1 giây để phần tử biến mất sau khi phần tử đã phai mờ-->
<!--                        }, 5000); // Hiển thị trong 5 giây (5000 milliseconds)-->
<!--                    }-->
<!--                </script>-->

<!--                <form th:action="@{/}" method="post">-->
                <div class="col-lg-3 col-md-4 col-sm-6" th:each="product : ${products}" th:if="${product.deleted} == false">
                    <div class="featured__item">
                        <div class="featured__item__pic set-bg">
                            <img class="my-product-image" style="height: 100%; width: 100%" th:src="'data:image/jpeg;base64,' + ${product.image}" alt="Product Image">
                            <ul class="featured__item__pic__hover">
                                <li><button class="site-btn" type="submit" onclick="addToCart(event)">Add to cart</button></li>
                            </ul>
                        </div>
                        <div class="featured__item__text">
                            <input class="product-id" type="hidden" th:value="${product.id}">
                            <h6 class="product-name" th:text="${product.name}"></h6>
                            <h6 th:text="${product.info}"></h6>
                            <h5 class="product-price" th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 3, 'POINT').replace('.000', '') + 'đ'}"></h5>
                        </div>
                    </div>
                </div>
<!--                </form>-->

                <script>

                    // console.log("lmao");

                    function addToCart(event) {
                        event.preventDefault();

                        let productElement = event.target.closest('.featured__item');
                        let productId = productElement.querySelector('.product-id').value;
                        let productImg = productElement.querySelector('.my-product-image').getAttribute('src');
                        let productName = productElement.querySelector('.product-name').innerText;
                        let productPrice = productElement.querySelector('.product-price').innerText;

                        let newProduct = {
                            id: productId,
                            image: productImg,
                            name: productName,
                            price: productPrice,
                            quantity: 1
                        };

                        // Lấy danh sách sản phẩm từ localStorage (nếu có)
                        let productsInCart = JSON.parse(localStorage.getItem('productsInCart')) || [];

                        let existingProduct = productsInCart.find(product => product.id === newProduct.id);

                        if (existingProduct) {
                            alert("Sản phẩm "+productName+" đã có trong giỏ hàng!");
                        } else {
                            // Nếu sản phẩm chưa tồn tại, thêm nó vào danh sách
                            alert("Sản phẩm "+productName+" đã được thêm vào giỏ hàng!");
                            productsInCart.push(newProduct);
                        }

                        // Lưu danh sách sản phẩm mới vào localStorage
                        localStorage.setItem('productsInCart', JSON.stringify(productsInCart));
                    }

                    // // Lấy danh sách từ localStorage hoặc khởi tạo danh sách mới nếu chưa tồn tại
                    // let productsInCart = JSON.parse(localStorage.getItem('productsInCart')) || [];
                    //
                    // // Xóa dữ liệu của danh sách
                    // productsInCart = [];
                    //
                    // // Lưu danh sách mới vào localStorage
                    // localStorage.setItem('productsInCart', JSON.stringify(productsInCart));

                </script>

            </div>


        </div>
</section>

<!-- Banner Begin -->
<div class="banner">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="banner__pic">
                    <img th:src="@{/img/banner/banner-1.jpg}" alt="">
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
                <div class="banner__pic">
                    <img th:src="@{/img/banner/banner-2.jpg}" alt="">
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Banner End -->

<!-- Latest Product Section Begin -->
<section class="latest-product spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6">
                <div class="latest-product__text">
                    <h4>Latest Products</h4>
                    <div class="latest-product__slider owl-carousel">
                        <div class="latest-prdouct__slider__item">

                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-1.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>

                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-2.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>

                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-3.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>

                        </div>
                        <div class="latest-prdouct__slider__item">
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-1.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-2.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-3.jpg}"  alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="latest-product__text">
                    <h4>Top Rated Products</h4>
                    <div class="latest-product__slider owl-carousel">
                        <div class="latest-prdouct__slider__item">
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-1.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-2.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-3.jpg}"  alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                        </div>
                        <div class="latest-prdouct__slider__item">
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-1.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-2.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-3.jpg}"  alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="latest-product__text">
                    <h4>Review Products</h4>
                    <div class="latest-product__slider owl-carousel">
                        <div class="latest-prdouct__slider__item">
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-1.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-2.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-3.jpg}"  alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                        </div>
                        <div class="latest-prdouct__slider__item">
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-1.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-2.jpg}" alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                            <a href="#" class="latest-product__item">
                                <div class="latest-product__item__pic">
                                    <img th:src="@{/img/latest-product/lp-3.jpg}"  alt="">
                                </div>
                                <div class="latest-product__item__text">
                                    <h6>Crab Pool Security</h6>
                                    <span>$30.00</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Latest Product Section End -->

<!-- Blog Section Begin -->
<section class="from-blog spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title from-blog__title">
                    <h2>From The Blog</h2>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic">
                        <img th:src="@{/img/blog/blog-1.jpg}" alt="">
                    </div>
                    <div class="blog__item__text">
                        <ul>
                            <li><i class="fa fa-calendar-o"></i> May 4,2019</li>
                            <li><i class="fa fa-comment-o"></i> 5</li>
                        </ul>
                        <h5><a href="#">Cooking tips make cooking simple</a></h5>
                        <p>Sed quia non numquam modi tempora indunt ut labore et dolore magnam aliquam quaerat </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic">
                        <img th:src="@{/img/blog/blog-2.jpg}" alt="">
                    </div>
                    <div class="blog__item__text">
                        <ul>
                            <li><i class="fa fa-calendar-o"></i> May 4,2019</li>
                            <li><i class="fa fa-comment-o"></i> 5</li>
                        </ul>
                        <h5><a href="#">6 ways to prepare breakfast for 30</a></h5>
                        <p>Sed quia non numquam modi tempora indunt ut labore et dolore magnam aliquam quaerat </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="blog__item">
                    <div class="blog__item__pic">
                        <img th:src="@{/img/blog/blog-3.jpg}" alt="">
                    </div>
                    <div class="blog__item__text">
                        <ul>
                            <li><i class="fa fa-calendar-o"></i> May 4,2019</li>
                            <li><i class="fa fa-comment-o"></i> 5</li>
                        </ul>
                        <h5><a href="#">Visit the clean farm in the US</a></h5>
                        <p>Sed quia non numquam modi tempora indunt ut labore et dolore magnam aliquam quaerat </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Blog Section End -->

<!-- Footer Section-->
<div th:replace="~{fragments::footer}"></div>

<!-- Js Plugins -->
<div th:replace="~{fragments::JS-import}"></div>

</body>

</html>